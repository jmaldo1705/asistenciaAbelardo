<div class="container">
  <!-- Header con informaciÃ³n del defensor -->
  <div class="header" *ngIf="coordinador">
    <button class="btn-back" (click)="volver()">
      â† Volver
    </button>
    <h1>ğŸ‘¥ Invitados de {{ coordinador.nombreCompleto }}</h1>
    <div class="info-card">
      <div class="info-row">
        <span class="info-label">ğŸ™ï¸ Municipio:</span>
        <span class="info-value">{{ coordinador.municipio }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">ğŸ“± Celular:</span>
        <span class="info-value">{{ coordinador.celular }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">ğŸ‘¤ Invitados confirmados:</span>
        <span class="info-value badge-number">{{ coordinador.numeroInvitados }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">ğŸ“‹ Invitados registrados:</span>
        <span class="info-value badge-number">{{ invitados.length }}</span>
      </div>
    </div>
  </div>

  <!-- BotÃ³n para agregar invitado -->
  <div class="actions">
    <button class="btn btn-primary" (click)="toggleFormulario()">
      {{ mostrarFormulario ? 'âŒ Cancelar' : 'â• Agregar Invitado' }}
    </button>
  </div>

  <!-- Formulario de nuevo invitado -->
  <div class="form-card" *ngIf="mostrarFormulario">
    <h2>ğŸ“ Nuevo Invitado</h2>
    <form (ngSubmit)="agregarInvitado()">
      <div class="form-group">
        <label>ğŸ‘¤ Nombre completo *</label>
        <input 
          type="text" 
          [(ngModel)]="nuevoInvitado.nombre" 
          name="nombre"
          class="form-control"
          placeholder="Nombre completo del invitado"
          required>
      </div>

      <div class="form-group">
        <label>ğŸ†” CÃ©dula *</label>
        <input 
          type="text" 
          [(ngModel)]="nuevoInvitado.cedula" 
          name="cedula"
          class="form-control"
          placeholder="NÃºmero de cÃ©dula"
          required>
      </div>

      <div class="form-group">
        <label>ğŸ“ TelÃ©fono *</label>
        <input 
          type="tel" 
          [(ngModel)]="nuevoInvitado.telefono" 
          name="telefono"
          class="form-control"
          placeholder="NÃºmero de telÃ©fono"
          required>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="toggleFormulario()">
          Cancelar
        </button>
        <button type="submit" class="btn btn-success">
          âœ… Guardar Invitado
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de invitados -->
  <div class="invitados-grid">
    <div class="invitado-card" *ngFor="let invitado of invitados; let i = index">
      <div class="invitado-number">{{ i + 1 }}</div>
      <div class="invitado-info">
        <h3>{{ invitado.nombre }}</h3>
        <p><strong>ğŸ†” CÃ©dula:</strong> {{ invitado.cedula }}</p>
        <p><strong>ğŸ“ TelÃ©fono:</strong> <a href="tel:{{ invitado.telefono }}">{{ invitado.telefono }}</a></p>
      </div>
      <button 
        class="btn-delete-invitado" 
        (click)="abrirModalEliminar(invitado)"
        title="Eliminar invitado">
        <span class="icon-delete">ğŸ—‘</span>
      </button>
    </div>

    <div class="empty-state" *ngIf="invitados.length === 0">
      <div class="empty-icon">ğŸ“‹</div>
      <p>No hay invitados registrados</p>
      <button class="btn btn-primary" (click)="toggleFormulario()" *ngIf="!mostrarFormulario">
        â• Agregar primer invitado
      </button>
    </div>
  </div>

  <!-- Resumen -->
  <div class="summary" *ngIf="invitados.length > 0 && coordinador">
    <div class="summary-content">
      <p>
        <strong>Total registrados:</strong> {{ invitados.length }} de {{ coordinador.numeroInvitados }} confirmados
      </p>
      <div class="progress-bar" *ngIf="coordinador.numeroInvitados > 0">
        <div class="progress-fill" [style.width.%]="(invitados.length / coordinador.numeroInvitados) * 100"></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de confirmaciÃ³n para eliminar invitado -->
<div class="modal-overlay" *ngIf="mostrarModalEliminar" (click)="cerrarModalEliminar()">
  <div class="modal-content modal-confirm" (click)="$event.stopPropagation()">
    <div class="modal-header modal-header-danger">
      <h2>âš ï¸ Confirmar EliminaciÃ³n</h2>
      <button class="close-btn" (click)="cerrarModalEliminar()">âœ•</button>
    </div>
    <div class="modal-body" *ngIf="invitadoAEliminar">
      <div class="confirm-icon">
        <span class="icon-warning">ğŸ—‘ï¸</span>
      </div>
      <p class="confirm-message">
        Â¿EstÃ¡ seguro de que desea eliminar a este invitado?
      </p>
      <div class="confirm-details">
        <p><strong>Nombre:</strong> {{ invitadoAEliminar.nombre }}</p>
        <p><strong>CÃ©dula:</strong> {{ invitadoAEliminar.cedula }}</p>
        <p><strong>TelÃ©fono:</strong> {{ invitadoAEliminar.telefono }}</p>
      </div>
      <p class="confirm-warning">
        <strong>Esta acciÃ³n no se puede deshacer.</strong>
      </p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="cerrarModalEliminar()">Cancelar</button>
      <button class="btn btn-danger" (click)="confirmarEliminar()">
        ğŸ—‘ï¸ SÃ­, Eliminar
      </button>
    </div>
  </div>
</div>
