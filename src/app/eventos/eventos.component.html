<div class="container">
  <!-- Encabezado -->
  <div class="header">
    <h1>ğŸ“… GestiÃ³n de Eventos</h1>
  </div>

  <!-- BotÃ³n para agregar nuevo evento -->
  <div class="action-bar">
    <button class="btn-nuevo" (click)="abrirModal()">
      â• Nuevo Evento
    </button>
    <button class="btn-secondary" (click)="volverACoordinadores()">
      â† Volver a Coordinadores
    </button>
  </div>

  <!-- Lista de eventos -->
  <div class="eventos-grid">
    <div *ngFor="let evento of eventos" class="evento-card">
      <div class="evento-header">
        <h3>{{ evento.nombre }}</h3>
        <div class="action-buttons">
          <button class="btn btn-edit" (click)="abrirModal(evento)" title="Editar evento">
            âœï¸
          </button>
          <button class="btn btn-danger" (click)="eliminarEvento(evento.id!)" title="Eliminar">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>

      <div class="evento-body">
        <p class="evento-info">
          <span class="info-icon">ğŸ“</span>
          <span class="info-label">Lugar:</span>
          <span class="info-value">{{ evento.lugar }}</span>
        </p>
        <p class="evento-info">
          <span class="info-icon">ğŸ“…</span>
          <span class="info-label">Fecha:</span>
          <span class="info-value">{{ evento.fecha | date:'medium' }}</span>
        </p>
        <p *ngIf="evento.observaciones" class="evento-observaciones">
          <strong>Observaciones:</strong> {{ evento.observaciones }}
        </p>
      </div>
    </div>

    <div *ngIf="eventos.length === 0" class="empty-state">
      <p>ğŸ“… No hay eventos creados</p>
      <p class="empty-subtitle">Crea tu primer evento haciendo clic en "Nuevo Evento"</p>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="mostrarModal" (click)="cerrarModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ modoEdicion ? 'âœï¸ Editar' : 'â• Nuevo' }} Evento</h2>
        <button class="close-btn" (click)="cerrarModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Nombre del Evento *</label>
          <input [(ngModel)]="eventoActual.nombre" type="text" class="form-control" placeholder="Ej: ReuniÃ³n Regional">
        </div>

        <div class="form-group autocomplete-container">
          <label>Lugar * ğŸ“</label>
          <input [(ngModel)]="eventoActual.lugar" 
            (input)="buscarLugar($event)"
            type="text" 
            class="form-control"
            placeholder="Buscar direcciÃ³n, establecimiento, ciudad..."
            autocomplete="off">
          <div class="autocomplete-suggestions" *ngIf="mostrandoSugerenciasLugar">
            <div class="suggestion-item suggestion-detailed" *ngFor="let sugerencia of lugarSugerencias"
              (click)="seleccionarLugar(sugerencia)">
              <span class="suggestion-icon">ğŸ“</span>
              <div class="suggestion-content">
                <span class="suggestion-name">{{ sugerencia.structured_formatting?.main_text || sugerencia.description.split(',')[0] }}</span>
                <span class="suggestion-address">{{ sugerencia.structured_formatting?.secondary_text || sugerencia.description }}</span>
                <span class="suggestion-type" *ngIf="sugerencia.types?.length">{{ getPlaceTypeLabel(sugerencia.types[0]) }}</span>
              </div>
            </div>
          </div>
          <small class="form-hint location-hint" *ngIf="lugarSeleccionadoDeLista && eventoActual.lugar">
            âœ… UbicaciÃ³n con coordenadas guardadas
          </small>
        </div>

        <div class="form-group">
          <label>Fecha y Hora *</label>
          <input [(ngModel)]="eventoActual.fecha" type="datetime-local" class="form-control">
        </div>

        <div class="form-group">
          <label>Observaciones</label>
          <textarea [(ngModel)]="eventoActual.observaciones" class="form-control" rows="3"
            placeholder="Detalles adicionales del evento..."></textarea>
        </div>

        <p class="form-note">* Campos obligatorios</p>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="cerrarModal()">Cancelar</button>
        <button class="btn btn-primary" (click)="guardarEvento()">ğŸ’¾ Guardar</button>
      </div>
    </div>
  </div>
</div>